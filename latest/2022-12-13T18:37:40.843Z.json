[{"creator":"Ref Finance","title":"Why Ref v2 is Better than Uni v3","link":"https://medium.com/nearprotocol/why-ref-v2-is-better-than-uni-v3-d24afb5c693c?source=rss----1128a53be4a7---4","pubDate":"Tue, 13 Dec 2022 18:13:26 GMT","content:encoded":"<h4>Introducing the Discretized Liquidity AMM with Limit¬†Orders</h4><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*CnNL-ikKniBm9F0kAM93uQ.jpeg\" /></figure><h3>Introduction &amp; Background</h3><p>Ref Finance v2 is bringing the future of trading to NEAR: a Discretized Liquidity AMM (DLAMM) with limit orders. Launching in the coming weeks, you can soon enjoy a CEX-like trading experience with all the DEX benefits.</p><h4><strong>TL;DR</strong></h4><p>1. The collapse of FTX points to the necessity for DEXs with trading experience comparable to¬†CEXs.</p><p>2. Ref Finance is launching its v2, the core components of which are its discretized liquidity AMM (DLAMM) and limit¬†orders.</p><p>3. DLAMM is an improved version of Uniswap v3‚Äôs concentrated liquidity, with more accurate liquidity provision, increased capital efficiency, and near-zero slippage.</p><p>4. Ref v2 also has built-in limit orders. Traders can place market- and limit orders with near-zero slippage, bringing a CEX-style trading experience on a¬†DEX.</p><p>5. Ref v2 can be enjoyed faster and cheaper than almost any other chain, thanks to NEAR‚Äôs fast finality (1‚Äì2s) and negligible fees (&lt;$0.01).</p><p>6. Discretized liquidity AMM is a positive sum game where LPs and traders both¬†win.</p><p>With the recent collapse of one of the world‚Äôs biggest centralized exchanges (CEX), <a href=\"https://www.nytimes.com/2022/11/10/technology/ftx-binance-crypto-explained.html\">FTX</a>, the crypto community quickly awakened to the importance of decentralization. Adoption to decentralized finance (DeFi) protocols, especially decentralized exchanges (DEXs), grew as people recognized the necessity for transparency and self-custody over one‚Äôs¬†assets.</p><p>With DEXs more important now than ever, let us take a look at where they are headed. In this article, we will analyze the evolution of DEXs through its prime example, Uniswap, and introduce the next phase of its development: <em>discretized concentrated liquidity.</em></p><h4>Recap of Uniswap v1, v2, and¬†v3</h4><p>In November 2018, Uniswap v1 launched mostly as a proof of concept. It introduced the idea of an AMM, leveraging the math behind the constant product equation, x * y = k. At the time, Uniswap v1 only supported ETH-ERC20 trading pairs and liquidity pools¬†(LPs).</p><p>In May 2020, Uniswap v2 launched as an improvement upon v1. Some of the key improvements were the introduction of liquidity pools, ERC20-ERC20 pools, decentralized TWAP price oracle, and flash¬†swaps.</p><p>In May 2021, Uniswap v3 launched. v3 introduced key innovations such as concentrated liquidity, as well as improved security, new fee-tiers, oracle feed development, and non-fungible liquidity. All in all, the main thesis of Uniswap v3 was to achieve better capital efficiency for the platform‚Äôs traders and the liquidity providers through the concept of <strong>concentrated liquidity.</strong></p><p><strong>What is concentrated liquidity? What benefits does it¬†bring?</strong></p><p>As opposed to AMMs, where liquidity is simply provided without specifying a range, concentrated liquidity means LPs can allocate capital to their preferred price intervals, which allows for a significantly higher capital efficiency.</p><p>Concentrated liquidity benefits <em>all</em> parties: traders and¬†LPs.</p><p>LPs benefit from the capital efficiency of providing a narrow range of liquidity, generally which is utilized more by traders, which consequently can generate up to<strong> </strong><a href=\"https://twitter.com/Uniswap/status/1374407493741256711\"><strong>4000x more fees</strong></a> compared to Uniswap¬†v2.</p><p>Traders, in turn, benefit from the deeper liquidity</p><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/878/0*DHWXFnUB8iohu87K\" /></figure><p>Uniswap V3 saw strong adoption from the crypto community thanks to its new concentrated liquidity model. Uniswap v3 volumes increased non-stop since its launch, quickly reaching a 97.2% dominance over Uniswap v2 in terms of daily¬†volume.</p><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/959/0*oUlQ__HSEBJqzzm8\" /></figure><p><strong>Discretized Liquidity on Ref¬†v2</strong></p><p>In partnership with <a href=\"https://izumi.finance/\"><strong>iZUMi Finance</strong></a> and <a href=\"https://arctic.trade/\"><strong>Arctic</strong></a>, Ref Finance is proud to introduce Ref v2: the Discretized Liquidity AMM (DLAMM) with limit orders. Think Uniswap V3‚Äôs concentrated liquidity but better, and now with limit order functionality to bring the CEX trading experience on-chain.</p><p><strong>Discretized Liquidity AMM vs Concentrated Liquidity AMM</strong></p><p>Discretized Liquidity is the shorthand for DLAMM, which means ‚Äúdiscretized liquidity automated market maker.‚Äù Existing concentrated liquidity AMMs, such as Uniswap v3, follow the constant product formula (X*Y=K), where the price changes continuously with the amount of X and Y tokens in the pool. Designed by iZUMi Finance, the <strong>discretized liquidity AMM</strong> uses a synthetic continuous constant product curve with a discretized constant sum formula (x+y=k), where prices are discretized in the AMM (see figure¬†below).</p><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/878/0*ATSycSfsZg0Cwl1t\" /></figure><p>This results in two major improvements for discretized liquidity AMMs: <strong>reduced slippage</strong> and <strong>more accurate liquidity provision </strong>within a price¬†range.</p><h4><strong>How Ref v2 Improves Upon Uniswap¬†V3</strong></h4><p>Ref v2 not only introduces the best parts of Uniswap v3 (capital efficiency) with its discretized liquidity AMM, but goes even further to enable a CEX-like trading experience normally impossible on DEXs with a built-in limit order functionality. And all of this, with the full benefits of a DEX: decentralized, secure, and transparent end-to-end transactions for traders and liquidity providers.</p><p>On Ref v2 you¬†can..</p><ol><li><strong>Enjoy high capital efficiency thanks to the Discretized Liquidity AMM</strong></li></ol><p>Just like on Uni v3, Ref v2 enables you to provide concentrated liquidity‚Ää‚Äî‚Ääi.e. liquidity that is specific to a price range. This means that as an LP you are able to provide liquidity to a price range that you think traders utilize more, for instance, and potentially collect way more fees than before. As a trader, you can potentially enjoy deeper liquidity in the price ranges that you frequent, as liquidity doesn‚Äôt have to be spread out across the entire range¬†anymore.</p><p><strong>2. Enjoy Uni V3-style AMM at a fraction of the speed and¬†costs</strong></p><p>By leveraging NEAR, Ref is able to offer its discretized liquidity AMM with incredibly fast finality (1‚Äì2s) and at negligible costs (fractions of a¬†penny).</p><p><strong>3. Place limit¬†orders</strong></p><p>By definition, a limit order is an order to buy or sell an asset with a restriction on the maximum price to be paid or the minimum price at which you sell. This is a typical feature on CEXs that use an orderbook, which allows users to program orders within their preferred price¬†range.</p><p>Currently, there isn‚Äôt a proper limit order function on Uniswap v3. The only way is to provide concentrated liquidity outside the current price and thus <em>mimic</em> a limit order. Ref v2, on the other hand, introduces built-in limit order functionality. Now users can trade on a DEX like they normally would on a CEX¬†ü§Ø</p><p><strong>4. Place limit orders without price limitations</strong></p><p>As Uni v3 only allows for limit orders in a roundabout way, once the synthetic limit order is filled, if or when the price returns to its original point, LPs are no longer able to claim their order earnings as the earned tokens would have been reverted.</p><p>On Ref v2, users can place limit buy orders at a price higher than current price, and the algorithm will then auto match with the best price. This further provides a trading experience akin to¬†CEXs<strong>.</strong></p><p><strong>5. Place limit orders with near-zero slippage</strong></p><p>Thanks to Ref‚Äôs discretized liquidity AMM, which leverages the power of a constant sum formula, traders can not only place limit orders, but do so with <em>near-zero slippage</em>.</p><p>Moreover, when traders place limit orders on Ref v2, they effectively become temporary LPs to that pool in that price range. Aside from the state of the art DLAMM model itself, Ref v2‚Äôs limit order capacity effectively adds additional liquidity into the pools, thus reducing even more slippage.</p><p><strong>6. Benefit from limit order priority AND fair LP fee structure</strong></p><p>The introduction of the limit order liquidity provider on Ref v2 naturally introduces competition on fees with the regular LPs who provide concentrated liquidity. To best incentivize each party, limit orders will always be prioritized in terms of the order of transaction, but the LP fees will be distributed proportionally to the concentrated liquidity providers.</p><h4><strong>Why should YOU¬†care?</strong></h4><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*2cbeE9Njicqz5sufRZXnyA.png\" /></figure><p>Tldr; Discretized Liquidity AMM is a positive sum game. <em>Everybody wins on Ref¬†V2.</em></p><ol><li>Liquidity Providers: Like on Uni v3, LPs on Ref v2 can maximize the transaction fees they collect from trades by providing concentrated liquidity into a specific price range that traders frequent. In addition, LPs also receive all the fees generated from limit order trades. When a limit order gets filled, it is not the trader who receive the transaction fee, but rather the underlying LP within that¬†range.</li><li>Traders: Traders are able to enjoy deeper liquidity now, as well as place market orders and limit orders with near-zero slippage. When traders place limit orders, they effectively become liquidity providers, who ‚Äúmake markets‚Äù by placing offers onto the exchange.</li><li>Active Market Makers: Market makers can reduce the cost of LP management to a much affordable rate(&lt;$0.01/txn), with more predictable profit and loss (PnL), and trading experience closer to a CLOB exchange.</li></ol><blockquote>‚ÄúTldr; DL-AMM is a positive sum¬†game‚Äù</blockquote><h3>Contact Author</h3><p><a href=\"https://twitter.com/lokpray\">Author‚Äôs Twitter</a><br>Official <a href=\"https://twitter.com/finance_ref\">Ref Finance Twitter</a><br><a href=\"https://testnet.ref.finance/v2farms\">Ref Finance V2 Testnet</a><br><a href=\"https://app.ref.finance/\">Ref Finance¬†App</a></p><h3>Disclaimer</h3><p>Ref Finance does not endorse or promote any of the projects, platforms or cryptocurrencies mentioned in this blogpost. Any descriptions of functionality and services provided are for information only. Ref Finance is not responsible for any loss of funds or other damages caused as a result of using the projects, platforms or cryptocurrencies described above.</p><img src=\"https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=d24afb5c693c\" width=\"1\" height=\"1\" alt=\"\"><hr><p><a href=\"https://medium.com/nearprotocol/why-ref-v2-is-better-than-uni-v3-d24afb5c693c\">Why Ref v2 is Better than Uni v3</a> was originally published in <a href=\"https://medium.com/nearprotocol\">NEAR Protocol</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>","content:encodedSnippet":"Introducing the Discretized Liquidity AMM with Limit¬†Orders\n\nIntroduction & Background\nRef Finance v2 is bringing the future of trading to NEAR: a Discretized Liquidity AMM (DLAMM) with limit orders. Launching in the coming weeks, you can soon enjoy a CEX-like trading experience with all the DEX benefits.\nTL;DR\n1. The collapse of FTX points to the necessity for DEXs with trading experience comparable to¬†CEXs.\n2. Ref Finance is launching its v2, the core components of which are its discretized liquidity AMM (DLAMM) and limit¬†orders.\n3. DLAMM is an improved version of Uniswap v3‚Äôs concentrated liquidity, with more accurate liquidity provision, increased capital efficiency, and near-zero slippage.\n4. Ref v2 also has built-in limit orders. Traders can place market- and limit orders with near-zero slippage, bringing a CEX-style trading experience on a¬†DEX.\n5. Ref v2 can be enjoyed faster and cheaper than almost any other chain, thanks to NEAR‚Äôs fast finality (1‚Äì2s) and negligible fees (<$0.01).\n6. Discretized liquidity AMM is a positive sum game where LPs and traders both¬†win.\nWith the recent collapse of one of the world‚Äôs biggest centralized exchanges (CEX), FTX, the crypto community quickly awakened to the importance of decentralization. Adoption to decentralized finance (DeFi) protocols, especially decentralized exchanges (DEXs), grew as people recognized the necessity for transparency and self-custody over one‚Äôs¬†assets.\nWith DEXs more important now than ever, let us take a look at where they are headed. In this article, we will analyze the evolution of DEXs through its prime example, Uniswap, and introduce the next phase of its development: discretized concentrated liquidity.\nRecap of Uniswap v1, v2, and¬†v3\nIn November 2018, Uniswap v1 launched mostly as a proof of concept. It introduced the idea of an AMM, leveraging the math behind the constant product equation, x * y = k. At the time, Uniswap v1 only supported ETH-ERC20 trading pairs and liquidity pools¬†(LPs).\nIn May 2020, Uniswap v2 launched as an improvement upon v1. Some of the key improvements were the introduction of liquidity pools, ERC20-ERC20 pools, decentralized TWAP price oracle, and flash¬†swaps.\nIn May 2021, Uniswap v3 launched. v3 introduced key innovations such as concentrated liquidity, as well as improved security, new fee-tiers, oracle feed development, and non-fungible liquidity. All in all, the main thesis of Uniswap v3 was to achieve better capital efficiency for the platform‚Äôs traders and the liquidity providers through the concept of concentrated liquidity.\nWhat is concentrated liquidity? What benefits does it¬†bring?\nAs opposed to AMMs, where liquidity is simply provided without specifying a range, concentrated liquidity means LPs can allocate capital to their preferred price intervals, which allows for a significantly higher capital efficiency.\nConcentrated liquidity benefits all parties: traders and¬†LPs.\nLPs benefit from the capital efficiency of providing a narrow range of liquidity, generally which is utilized more by traders, which consequently can generate up to 4000x more fees compared to Uniswap¬†v2.\nTraders, in turn, benefit from the deeper liquidity\n\nUniswap V3 saw strong adoption from the crypto community thanks to its new concentrated liquidity model. Uniswap v3 volumes increased non-stop since its launch, quickly reaching a 97.2% dominance over Uniswap v2 in terms of daily¬†volume.\n\nDiscretized Liquidity on Ref¬†v2\nIn partnership with iZUMi Finance and Arctic, Ref Finance is proud to introduce Ref v2: the Discretized Liquidity AMM (DLAMM) with limit orders. Think Uniswap V3‚Äôs concentrated liquidity but better, and now with limit order functionality to bring the CEX trading experience on-chain.\nDiscretized Liquidity AMM vs Concentrated Liquidity AMM\nDiscretized Liquidity is the shorthand for DLAMM, which means ‚Äúdiscretized liquidity automated market maker.‚Äù Existing concentrated liquidity AMMs, such as Uniswap v3, follow the constant product formula (X*Y=K), where the price changes continuously with the amount of X and Y tokens in the pool. Designed by iZUMi Finance, the discretized liquidity AMM uses a synthetic continuous constant product curve with a discretized constant sum formula (x+y=k), where prices are discretized in the AMM (see figure¬†below).\n\nThis results in two major improvements for discretized liquidity AMMs: reduced slippage and more accurate liquidity provision within a price¬†range.\nHow Ref v2 Improves Upon Uniswap¬†V3\nRef v2 not only introduces the best parts of Uniswap v3 (capital efficiency) with its discretized liquidity AMM, but goes even further to enable a CEX-like trading experience normally impossible on DEXs with a built-in limit order functionality. And all of this, with the full benefits of a DEX: decentralized, secure, and transparent end-to-end transactions for traders and liquidity providers.\nOn Ref v2 you¬†can..\n\nEnjoy high capital efficiency thanks to the Discretized Liquidity AMM\n\nJust like on Uni v3, Ref v2 enables you to provide concentrated liquidity‚Ää‚Äî‚Ääi.e. liquidity that is specific to a price range. This means that as an LP you are able to provide liquidity to a price range that you think traders utilize more, for instance, and potentially collect way more fees than before. As a trader, you can potentially enjoy deeper liquidity in the price ranges that you frequent, as liquidity doesn‚Äôt have to be spread out across the entire range¬†anymore.\n2. Enjoy Uni V3-style AMM at a fraction of the speed and¬†costs\nBy leveraging NEAR, Ref is able to offer its discretized liquidity AMM with incredibly fast finality (1‚Äì2s) and at negligible costs (fractions of a¬†penny).\n3. Place limit¬†orders\nBy definition, a limit order is an order to buy or sell an asset with a restriction on the maximum price to be paid or the minimum price at which you sell. This is a typical feature on CEXs that use an orderbook, which allows users to program orders within their preferred price¬†range.\nCurrently, there isn‚Äôt a proper limit order function on Uniswap v3. The only way is to provide concentrated liquidity outside the current price and thus mimic a limit order. Ref v2, on the other hand, introduces built-in limit order functionality. Now users can trade on a DEX like they normally would on a CEX¬†ü§Ø\n4. Place limit orders without price limitations\nAs Uni v3 only allows for limit orders in a roundabout way, once the synthetic limit order is filled, if or when the price returns to its original point, LPs are no longer able to claim their order earnings as the earned tokens would have been reverted.\nOn Ref v2, users can place limit buy orders at a price higher than current price, and the algorithm will then auto match with the best price. This further provides a trading experience akin to¬†CEXs.\n5. Place limit orders with near-zero slippage\nThanks to Ref‚Äôs discretized liquidity AMM, which leverages the power of a constant sum formula, traders can not only place limit orders, but do so with near-zero slippage.\nMoreover, when traders place limit orders on Ref v2, they effectively become temporary LPs to that pool in that price range. Aside from the state of the art DLAMM model itself, Ref v2‚Äôs limit order capacity effectively adds additional liquidity into the pools, thus reducing even more slippage.\n6. Benefit from limit order priority AND fair LP fee structure\nThe introduction of the limit order liquidity provider on Ref v2 naturally introduces competition on fees with the regular LPs who provide concentrated liquidity. To best incentivize each party, limit orders will always be prioritized in terms of the order of transaction, but the LP fees will be distributed proportionally to the concentrated liquidity providers.\nWhy should YOU¬†care?\n\nTldr; Discretized Liquidity AMM is a positive sum game. Everybody wins on Ref¬†V2.\n\nLiquidity Providers: Like on Uni v3, LPs on Ref v2 can maximize the transaction fees they collect from trades by providing concentrated liquidity into a specific price range that traders frequent. In addition, LPs also receive all the fees generated from limit order trades. When a limit order gets filled, it is not the trader who receive the transaction fee, but rather the underlying LP within that¬†range.\nTraders: Traders are able to enjoy deeper liquidity now, as well as place market orders and limit orders with near-zero slippage. When traders place limit orders, they effectively become liquidity providers, who ‚Äúmake markets‚Äù by placing offers onto the exchange.\nActive Market Makers: Market makers can reduce the cost of LP management to a much affordable rate(<$0.01/txn), with more predictable profit and loss (PnL), and trading experience closer to a CLOB exchange.\n\n‚ÄúTldr; DL-AMM is a positive sum¬†game‚Äù\nContact Author\nAuthor‚Äôs Twitter\nOfficial Ref Finance Twitter\nRef Finance V2 Testnet\nRef Finance¬†App\nDisclaimer\nRef Finance does not endorse or promote any of the projects, platforms or cryptocurrencies mentioned in this blogpost. Any descriptions of functionality and services provided are for information only. Ref Finance is not responsible for any loss of funds or other damages caused as a result of using the projects, platforms or cryptocurrencies described above.\n\nWhy Ref v2 is Better than Uni v3 was originally published in NEAR Protocol on Medium, where people are continuing the conversation by highlighting and responding to this story.","dc:creator":"Ref Finance","guid":"https://medium.com/p/d24afb5c693c","categories":["uniswap","trading","blockchain","liquidity","near-protocol"],"isoDate":"2022-12-13T18:13:26.000Z","from":"https://medium.com/feed/nearprotocol","hashId":"7abd7efc767b45287f5f8906c9fad007"}]